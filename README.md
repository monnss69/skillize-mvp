
> [!NOTE]
> Documentation auto-generated by [ai-docs.](https://github.com/connor-john/ai-docs)

# Skillize MVP - Technical Documentation

## Introduction
Skillize MVP is a personalized AI scheduler application built with Next.js 15, designed to help users efficiently manage their time and events. The application features a modern, dark-themed calendar interface with Google Calendar integration, user authentication, and personalized event management capabilities. Skillize enables users to schedule events, sync with external calendar services, and organize their time effectively.

The project aims to provide a seamless experience for users to manage their schedules, with an emphasis on integrating third-party calendar services like Google Calendar and offering a polished, responsive user interface with a distinctive dark theme styling.

## Codebase Overview

Skillize is built using a modern React-based architecture with server and client components, leveraging the latest Next.js App Router pattern. The application uses a combination of technologies:

### Frontend Architecture
- **Next.js 15**: Utilizing the latest App Router for routing and server components
- **React 19**: For building the UI with both server and client components
- **Tailwind CSS**: For styling and theming with a custom dark theme
- **shadcn/ui**: Component library for UI elements
- **Framer Motion**: For animations and transitions
- **React Hook Form + Zod**: For form handling and validation

### Backend Architecture
- **NextAuth.js**: For authentication with credentials and OAuth providers
- **Supabase**: As the database and backend service
- **Server Actions**: For secure data mutations
- **React Query**: For data fetching, caching, and synchronization

### State Management
- **React Query**: For server state management
- **Zustand**: For client-side state management
- **Context API**: For specific cross-component state sharing (like Google connection context)

### APIs and Integration
- **Google Calendar API**: For calendar synchronization
- **Custom API Routes**: For handling authentication, user data, and events

The application is structured using a domain-based approach, with clear separation between UI components, data fetching, and business logic.

## Development Environment Setup

### Prerequisites
- Node.js (v18+)
- pnpm 9.x
- Supabase account

### Setting Up the Project
1. Clone the repository:
   ```bash
   git clone https://github.com/username/skillize-mvp.git
   cd skillize-mvp
   ```

2. Install dependencies:
   ```bash
   pnpm install
   ```

3. Environment Variables:
   Create a `.env.local` file in the root directory with the following variables:
   ```
   NEXTAUTH_URL=http://localhost:3000
   NEXTAUTH_SECRET=your-nextauth-secret
   
   NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
   NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
   
   GOOGLE_CLIENT_ID=your-google-client-id
   GOOGLE_CLIENT_SECRET=your-google-client-secret
   ```

4. Start the development server:
   ```bash
   pnpm dev
   ```

### Database Setup
The application uses Supabase as its database. The following tables are required:

- `users`: Stores user information
- `events`: Stores calendar events
- `oauth_connections`: Stores OAuth provider connections
- `preferences`: Stores user preferences
- `courses`: Stores course information (for learning features)

## Code Repository Structure

The repository follows a standard Next.js 15 App Router structure:

```
skillize-mvp/
├── src/
│   ├── app/                  # App router pages and layout
│   │   ├── api/              # API routes
│   │   ├── (routes)/         # Various app routes (login, calendar, etc.)
│   │   ├── layout.tsx        # Root layout
│   │   └── page.tsx          # Home page
│   ├── components/           # React components
│   │   ├── calendar/         # Calendar specific components
│   │   ├── ui/               # Reusable UI components
│   │   └── ...
│   ├── contexts/             # React contexts
│   ├── hooks/                # Custom React hooks
│   ├── lib/                  # Utility functions and modules
│   │   ├── actions/          # Server actions
│   │   ├── supabase/         # Supabase client utilities
│   │   └── calendar/         # Calendar utility functions
│   ├── styles/               # Global styles
│   └── types/                # TypeScript type definitions
├── public/                   # Static assets
└── ...
```

### Key Directories:

- **app**: Contains all the route-based pages using Next.js App Router
  - **api**: API routes for authentication, events, and user data
  - **calendar**: Calendar view page and related components
  - **login/signup**: Authentication pages

- **components**: Reusable React components organized by domain
  - **calendar**: Calendar-specific components like WeekGridClient and event cards
  - **ui**: Shadcn UI components and custom UI elements

- **lib**: Utility functions and modules:
  - **actions**: Server action functions for data mutations
  - **supabase**: Supabase client initialization
  - **calendar**: Calendar utility functions for date handling and recurrence

- **types**: TypeScript type definitions for various entities like events, users, etc.

## Key Points of Complexity

### 1. Authentication System
The authentication system is built using NextAuth.js with multiple provider support:

- **Credential Authentication**: Email/password login
- **Google OAuth**: Integration with Google for authentication and calendar access
- **Token Refreshing**: Automatic refresh of OAuth tokens when expired
- **Session Management**: Session handling with JWT strategy
- **User Database Integration**: Integration with Supabase for user data storage

Key files:
- `src/app/api/auth/auth.config.ts`: NextAuth configuration
- `src/app/api/auth/refresh-google/route.ts`: Token refresh endpoint
- `src/app/api/auth/signup/route.ts`: User registration endpoint

### 2. Calendar System with Recurrence Support
The calendar implementation is complex with support for:

- **Recurring Events**: Support for daily, weekly, monthly recurring events
- **RRULE Parsing**: Custom parser for iCalendar RRULE format
- **Virtual Event Generation**: Generation of recurring event instances
- **Time Zone Handling**: Support for different time zones

Key files:
- `src/lib/calendar/recurrence.ts`: Recurrence rule handling
- `src/components/calendar/week-view/WeekGridClient.tsx`: Calendar grid component
- `src/components/calendar/week-view/components/event/EventCard.tsx`: Event display

### 3. Google Calendar Integration
The Google Calendar integration includes:

- **OAuth Flow**: Complete OAuth flow with token refresh
- **Calendar Sync**: Two-way synchronization with Google Calendar
- **Token Management**: Secure token storage and refresh
- **Event Mapping**: Mapping between Google event format and app format

Key files:
- `src/app/api/google/sync/route.ts`: Google Calendar sync endpoint
- `src/lib/actions/calendar.ts`: Calendar synchronization actions
- `src/contexts/GoogleConnectionContext.tsx`: Google connection state management

### 4. Form Handling with Validation
The form system uses React Hook Form with Zod validation:

- **Schema Validation**: Strong typing with Zod schemas
- **Complex Forms**: Support for nested form fields and conditional validation
- **Error Handling**: Comprehensive error message display

Key files:
- `src/components/calendar/week-view/components/create-event-modal/CreateEventModal.tsx`: Event creation form
- `src/components/signup-form/SignUpForm.tsx`: Signup form with validation
- `src/components/settings/UserProfileForm.tsx`: Profile settings form

### 5. Theming and UI System
The application uses a custom dark theme with Tailwind CSS:

- **Custom Color System**: Dark theme with amber/gold accents
- **Component Library**: Extended shadcn/ui components
- **Responsive Design**: Mobile-friendly layouts
- **Animations**: Smooth transitions and animations with Framer Motion

Key files:
- `tailwind.config.ts`: Tailwind configuration with theme extension
- `src/styles/globals.css`: Global CSS styles
- Various UI components in `src/components/ui/`

## Installation and Setup

### System Requirements
- Node.js v18.0.0 or newer
- pnpm v9.15.0 or newer
- A modern web browser (Chrome, Firefox, Safari, Edge)

### Installation Steps
1. Clone the repository:
   ```bash
   git clone https://github.com/yourusername/skillize-mvp.git
   ```

2. Navigate to the project directory:
   ```bash
   cd skillize-mvp
   ```

3. Install dependencies:
   ```bash
   pnpm install
   ```

4. Set up environment variables:
   Copy `.env.example` to `.env.local` and fill in the required values:
   ```
   NEXTAUTH_URL=http://localhost:3000
   NEXTAUTH_SECRET=your-secret-here
   
   NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
   NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
   
   GOOGLE_CLIENT_ID=your-google-client-id
   GOOGLE_CLIENT_SECRET=your-google-client-secret
   ```

5. Start the development server:
   ```bash
   pnpm dev
   ```

6. Build for production:
   ```bash
   pnpm build
   ```

7. Start the production server:
   ```bash
   pnpm start
   ```

## Getting Started

### Creating an Account
1. Navigate to the signup page `/signup`
2. Create an account using email/password or Google OAuth
3. You'll be redirected to the calendar page after successful authentication

### Using the Calendar
1. View your week in the calendar grid
2. Create a new event by clicking the "New Event" button
3. Fill in event details, including optional recurrence settings
4. View, edit, or delete events by clicking on them in the calendar

### Connecting Google Calendar
1. Go to the Settings page by clicking on the Settings icon
2. Navigate to the Account Settings tab
3. Click "Link Google Account" to connect your Google Calendar
4. Grant the necessary permissions
5. Your Google Calendar events will now sync with Skillize

### Managing Your Profile
1. Go to the Settings page
2. Navigate to the Profile Settings tab
3. Update your username, email, timezone, or avatar URL
4. Click "Update Profile" to save changes

### Creating Recurring Events
1. Click "New Event" to open the event creation modal
2. Toggle "Recurring Event" to enable recurrence options
3. Select frequency (daily, weekly, monthly)
4. Set an end date for the recurrence
5. Create the event to establish a recurring series

This quick start guide covers the basic functionality of Skillize. Explore the application to discover more features and capabilities designed to help you manage your schedule effectively.